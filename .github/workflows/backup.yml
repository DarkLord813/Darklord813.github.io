name: Backup Debug
on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  backup:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
          
      - name: ğŸ” Debug Info
        run: |
          echo "=== DEBUG INFO ==="
          echo "Current directory: $(pwd)"
          echo "Files in directory:"
          ls -la
          echo "Git status:"
          git status
          echo "Git remote:"
          git remote -v
          echo "Git branches:"
          git branch -a
          echo "=== END DEBUG ==="
          
      - name: âš™ï¸ Setup Git
        run: |
          git config --global user.name "GitHub Actions Bot"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          
      - name: ğŸ”„ Create Backup Branch
        run: |
          echo "Creating backup branch..."
          # First, fetch all branches
          git fetch origin
          
          # Create backup branch from current main
          git checkout -b backup-branch
          
      - name: ğŸš€ Push to Backup
        run: |
          echo "Pushing to backup-branch..."
          git push origin backup-branch --force
          echo "âœ… SUCCESS! Backup created."
